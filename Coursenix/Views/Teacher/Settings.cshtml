@* Views/Teacher/Settings.cshtml *@
@model TeacherSettingsViewModel
@{
    Layout = "_Layout";
}
@section css{
    <link href="/css/teacherSetting.css" rel="stylesheet">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/material-design-icons/3.0.1/iconfont/material-icons.min.css" rel="stylesheet">
    <title>Eduvera - Account Settings</title>
}

<div class="container">
    <h1>Account Settings</h1>

    <form asp-action="Settings" method="post" asp-controller="Teacher">
        <div class="profile-section">
            <div class="form-section">
                <div class="form-group"> 
                    <label for="fullName">Full Name</label>
                    <input type="text" asp-for="fullName" id="fullName" name="fullName" readonly class="readonly-field">
                </div>
                <div class="form-group">
                    <label for="email">Email Address</label>
                    <input type="email" asp-for="email" id="email" name="email" readonly class="readonly-field">
                </div>
                <div class="form-group">
                    <label for="phone">Phone Number</label>
                    <input type="tel" asp-for="phone" id="phone" name="phone" placeholder="Enter phone number">
                </div>
            </div>
            @* <div class="photo-section"> *@
            @*     <div class="profile-img"> *@
            @*         <img src="../assets/teacher1.svg" alt="Teacher Profile" class="teacher-image"> *@
            @*     </div> *@
            @*     <input type="file" asp-for="ProfilePicture" hidden> *@
            @*     <button type="button" class="upload-btn"> *@
            @*         <span class="icon">📷</span> *@
            @*         Upload Photo *@
            @*     </button> *@
            @*     <p class="photo-info">Image size should be under 1MB and image ratio needs to be 1:1</p> *@
            @* </div> *@
        </div>

        <div class="form-group">
            <label for="bio">Biography</label>
            <textarea asp-for="bio" id="bio" name="bio" placeholder="Tell students a bit about yourself and your teaching approach (max 200 words)"></textarea>
        </div>

        <div class="divider"></div>

        <h1>Change Password</h1>

        @*need to change name id="current-password" to "CurrentPassword"*@
        <div class="form-group">
            <label for="current-password">Current Password</label>
            <div class="form-group password-group">
                <input type="password" asp-for="CurrentPassword" id="current-password" name="password" placeholder="Current password" required minlength="8" />
                <i class="far fa-eye-slash toggle-password" data-target="current-password"></i>
                <span class="error-message" id="password-error"></span>
            </div>
        </div>

        <div class="form-group">
            <label for="password">New Password</label>
            <div class="form-group password-group">
                <input type="password" asp-for="password" id="password" name="password" placeholder="password" minlength="8" />
                <i class="far fa-eye-slash toggle-password" data-target="password"></i>
                <span class="error-message" id="password-error"></span>
            </div>
        </div>


        @*need to change name id="confirm-password" to "ConfirmPassword"*@
        <div class="form-group">
            <label for="confirm-password">Confirm Password</label>
            <div class="form-group password-group">
                <input type="password" asp-for="ConfirmPassword" id="confirm-password" name="confirm-password" placeholder="Confirm Password" />
                <i class="far fa-eye-slash toggle-password" data-target="confirm-password"></i>
                <span class="error-message" id="confirm-password-error"></span>
            </div>
        </div>

        <button type="submit" class="save-btn">Save Changes</button>
    </form>
</div>
@section scripts{
    <script>
                        // فتح/إغلاق القائمة
        document.querySelector('.profile-btn').addEventListener('click', function(e) {
          e.stopPropagation();
          document.querySelector('.dropdown-content').classList.toggle('show');
        });

        // إغلاق القائمة عند النقر خارجها
        window.addEventListener('click', function() {
          document.querySelector('.dropdown-content').classList.remove('show');
        });

        // منع إغلاق القائمة عند النقر داخلها
        document.querySelector('.dropdown-content').addEventListener('click', function(e) {
          e.stopPropagation();
        });

                // Toggle password visibility
                document.querySelectorAll('.toggle-password').forEach(toggle => {
                    toggle.addEventListener('click', function() {
                        const input = this.previousElementSibling;
                        if (input.type === 'password') {
                            input.type = 'text';
                        } else {
                            input.type = 'password';
                        }
                    });
                });

                // Profile dropdown functionality (optional enhancement)
                const profileDropdown = document.querySelector('.profile-dropdown');
                const dropdownMenu = document.querySelector('.dropdown-menu');

                profileDropdown.addEventListener('click', function() {
                    dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
                });

                // Close dropdown when clicking elsewhere
                document.addEventListener('click', function(event) {
                    if (!profileDropdown.contains(event.target)) {
                        dropdownMenu.style.display = 'none';
                    }
                });
    </script>
}